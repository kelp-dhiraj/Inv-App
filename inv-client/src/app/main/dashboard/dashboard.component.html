<div style="padding: 5px 0px; text-align: center; position: relative">
  <pa-sliding-radio (change)="onChange($event)" width="120" [buttons]="toggleButtons" [value]="toggleValue" style="font-size: 12px"></pa-sliding-radio>
  <div style="position: absolute; right: 0; top: 50%; margin-top: -12px;">
    <mat-radio-group class="radio-group" [(ngModel)]="allFlag" (change)="onChange()">
      <mat-radio-button value="N" style="min-width: 80px; ">Self</mat-radio-button>
      <mat-radio-button value="Y" style="min-width: 80px; ">All</mat-radio-button>
    </mat-radio-group>
  </div>
</div>
<div *ngIf="loaded" style="display: flex; align-items: center; background: #eee; padding: 5px;">
  <div>{{toggleValue == 'investor' ? 'EXISTING INVESTOR DASHBOARD' : 'PROSPECT DASHBOARD'}}<div style="font-size: 12px">AS of {{today | date: 'MMM d, y'}}</div></div>
  <span style="flex: 1 1 auto"></span>
  <div class="tn-logo" style="cursor: pointer"></div>
</div>
<mat-card *ngIf="toggleValue == 'investor' && loaded" fxLayout="row wrap" fxLayoutGap="0px" style="align-items: flex-start; margin-top: 20px">
  <div fxFlex="1 1 80%">
    <div style="font-size: 14px; margin: 5px 0px">{{sor.label}}</div>
    <div fxLayout="row wrap" fxLayoutGap="0px">
      <table mat-table [dataSource]="sor.dataSource" fxFlex="1 1 100%">
        <ng-container [matColumnDef]="mc" *ngFor="let mc of sor.mergedCols">
          <th mat-header-cell *matHeaderCellDef [attr.colspan]="sor.mergedColSpans[mc]" [ngClass]="className(mc)" style="text-align: center">{{sor.mergedColLabels[mc]}}</th>
        </ng-container>
        <ng-container *ngFor="let col of sorDataColumns; let i = index" [matColumnDef]="col" >
          <th mat-header-cell *matHeaderCellDef  [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{sor.colLabels[col]}}  </th>
          <td mat-cell *matCellDef="let element" [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{element[col]}}</td>
          <td mat-footer-cell *matFooterCellDef  [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{total('sor',col)}} </td>
        </ng-container>
        <ng-container *ngFor="let col of sorPlusColumns; let ci = index" [matColumnDef]="col" >
          <th mat-header-cell *matHeaderCellDef [ngStyle]="{width: ci == 0 ? '20px' : '60px'}" class="sor-plus"> {{sor.colLabels[col]}}  </th>
          <td mat-cell [ngStyle]="{width: ci == 0 ? '20px' : '60px'}" class="sor-plus" *matCellDef="let element; let i = index">
            <div *ngIf="i==0" style="position: absolute; height: 100%; top: 0px; display: flex; align-items: center">
              <mat-icon *ngIf="ci != 0 && ci < sorPlusColumns.length -1" style="font-size: 40px; width:40px; height: 40px">add_circle</mat-icon>
              <mat-icon *ngIf="ci != 0 && ci == sorPlusColumns.length -1" style="font-size: 40px; width:40px; height: 40px">forward</mat-icon>
            </div>
          </td>
          <td mat-footer-cell [ngStyle]="{width: ci == 0 ? '20px' : '60px'}" class="sor-plus" *matFooterCellDef ></td>
        </ng-container>
        <ng-container [matColumnDef]="ac" *ngFor="let ac of sor.avgCols">
          <td mat-footer-cell *matFooterCellDef [attr.colspan]="sor.avgColSpans[ac]" [ngClass]="className(ac)"><div>{{sor.avgData[ac]}}</div></td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="sor.mergedCols;"></tr>
        <tr mat-header-row *matHeaderRowDef="sor.cols;"></tr>
        <tr mat-row *matRowDef="let row; columns: sor.cols;"></tr>
        <tr mat-footer-row *matFooterRowDef="sor.cols"></tr>
        <tr mat-footer-row *matFooterRowDef="sor.avgCols"></tr>
      </table>
    </div>

    <!--div style="display: flex; align-items: center;padding: 10px 0px;">
      <span style="flex: 1 1 auto;">Average relationship index</span>
      <span style="flex: 0 0 100px;border: 1px solid #ccc; text-align: center;">55%</span>
    </div-->
  </div>
  <div fxFlex="1 1 20%">
    <div style="font-size: 14px; margin: 5px 0px">{{eip.label}}</div>
    <table mat-table [dataSource]="eip.dataSource" width="100%">
      <ng-container matColumnDef="a" >
        <th mat-header-cell *matHeaderCellDef [attr.colspan]="eip.cols.length" style="text-align: center"></th>
      </ng-container>
      <ng-container *ngFor="let col of eip.cols; let i = index" [matColumnDef]="col" >
        <th mat-header-cell *matHeaderCellDef  [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{eip.colLabels[col]}} </th>
        <td mat-cell *matCellDef="let element" [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{element[col]}} </td>
        <td mat-footer-cell *matFooterCellDef  [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{total('eip',col)}} </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="['a'];"></tr>
      <tr mat-header-row *matHeaderRowDef="eip.cols;"></tr>
      <tr mat-row *matRowDef="let row; columns: eip.cols;"></tr>
      <tr mat-footer-row *matFooterRowDef="eip.cols"></tr>
    </table>
  </div>
</mat-card>
<mat-card *ngIf="toggleValue == 'prospect' && loaded" fxLayout="row wrap" fxLayoutGap="0px" style="align-items: flex-start; margin-top: 20px">
  <div fxFlex="1 1 calc(33% - 60px)" style="align-items: flex-start">
    <div style="font-size: 14px; margin: 5px 0px">{{pu.label}}</div>
    <table mat-table [dataSource]="pu.dataSource" width="100%">
      <ng-container *ngFor="let col of pu.cols; let i = index" [matColumnDef]="col" >
        <th mat-header-cell *matHeaderCellDef  [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{pu.colLabels[col]}} </th>
        <td mat-cell *matCellDef="let element" [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{element[col]}} </td>
        <td mat-footer-cell *matFooterCellDef  [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{total('pu',col)}} </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="pu.cols;"></tr>
      <tr mat-row *matRowDef="let row; columns: pu.cols;"></tr>
      <tr mat-footer-row *matFooterRowDef="pu.cols"></tr>
    </table>
    <div style="text-align: center; padding: 10px;">
      <mat-icon style="font-size: 40px; width:40px; height: 40px; transform: rotate(90deg)">forward</mat-icon>
    </div>
    <div style="font-size: 14px; margin: 5px 0px">{{iq.label}}</div>
    <table mat-table [dataSource]="iq.dataSource" width="100%">
      <ng-container *ngFor="let col of iq.cols; let i = index" [matColumnDef]="col" >
        <th mat-header-cell *matHeaderCellDef  [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{iq.colLabels[col]}} </th>
        <td mat-cell *matCellDef="let element" [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{element[col]}} </td>
        <td mat-footer-cell *matFooterCellDef  [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{total('iq',col)}} </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="iq.cols;"></tr>
      <tr mat-row *matRowDef="let row; columns: iq.cols;"></tr>
      <tr mat-footer-row *matFooterRowDef="iq.cols"></tr>
    </table>
  </div>
  <div fxFlex="1 1 60px" style="display: flex; align-self: center; justify-content: center">
    <mat-icon style="font-size: 40px; width:40px; height: 40px">forward</mat-icon>
  </div>
  <div fxFlex="1 1 calc(33% - 60px)" style="align-items: flex-start">
    <div style="font-size: 14px; margin: 5px 0px">{{qp.label}} 1</div>
    <div class="qualified-table">
    <table mat-table [dataSource]="qp.dataSource" width="100%">
      <ng-container *ngFor="let col of qp.cols; let i = index" [matColumnDef]="col" >
        <th mat-header-cell *matHeaderCellDef  [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{qp.colLabels[col]}} </th>
        <td mat-cell *matCellDef="let element" [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{element[col]}} </td>
        <td mat-footer-cell *matFooterCellDef  [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{total('qp',col)}} </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="qp.cols;"></tr>
      <tr mat-row *matRowDef="let row; columns: qp.cols;"></tr>
      <tr mat-footer-row *matFooterRowDef="qp.cols"></tr>
    </table>
  </div>
    <div style="font-size: 14px; margin: 25px 0px 5px">{{ibf.label}}</div>
    <table mat-table [dataSource]="ibf.dataSource" width="100%">
      <ng-container *ngFor="let col of ibf.cols; let i = index" [matColumnDef]="col" >
        <th mat-header-cell *matHeaderCellDef  [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{ibf.colLabels[col]}} </th>
        <td mat-cell *matCellDef="let element" [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{element[col]}} </td>
        <td mat-footer-cell *matFooterCellDef  [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{total('ibf',col)}} </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="ibf.cols;"></tr>
      <tr mat-row *matRowDef="let row; columns: ibf.cols;"></tr>
      <tr mat-footer-row *matFooterRowDef="ibf.cols"></tr>
    </table>
  </div>
  <div fxFlex="1 1 60px" style="display: flex; align-self: center; justify-content: center">
    <mat-icon style="font-size: 40px; width:40px; height: 40px">forward</mat-icon>
  </div>
  <div fxFlex="1 1 calc(33% - 60px)" style="align-items: flex-start">
    <div style="font-size: 14px; margin: 5px 0px">{{ibs.label}}</div>
    <table mat-table [dataSource]="ibs.dataSource" width="100%">
      <ng-container *ngFor="let col of ibs.cols; let i = index" [matColumnDef]="col" >
        <th mat-header-cell *matHeaderCellDef  [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{ibs.colLabels[col]}} </th>
        <td mat-cell *matCellDef="let element" [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{element[col]}} </td>
        <td mat-footer-cell *matFooterCellDef  [ngStyle]="{'text-align': (i > 0 ? 'center': null)}"> {{total('ibs',col)}} </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="ibs.cols;"></tr>
      <tr mat-row *matRowDef="let row; columns: ibs.cols;"></tr>
      <tr mat-footer-row *matFooterRowDef="ibs.cols"></tr>
    </table>
  </div>
</mat-card>
<mat-card *ngIf="loaded" fxLayout="row wrap" fxLayout.lt-sm="column" fxLayoutGap="20px" fxLayoutGap.lt-sm="0px" fxLayoutAlign="flex-start" style="align-items: center; margin-top: 20px">
  <div fxFlex="1 1 calc(60% - 10px)">
    <div style="font-size: 14px; margin: 5px 0px">{{al.label}}</div>
    <table mat-table [dataSource]="al.dataSource" width="100%">
      <ng-container *ngFor="let col of al.cols; let i = index" [matColumnDef]="col" >
        <th mat-header-cell *matHeaderCellDef  [ngStyle]="{'text-align': i > 0 ? 'center': null}"> {{al.colLabels[col]}}  </th>
        <td mat-cell *matCellDef="let element" [ngStyle]="{'text-align': i > 0 ? 'center': null}"> {{element[col]}}</td>
        <td mat-footer-cell *matFooterCellDef  [ngStyle]="{'text-align': i > 0 ? 'center': null}"> {{total('al',col)}} </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="al.cols;"></tr>
      <tr mat-row *matRowDef="let row; columns: al.cols;"></tr>
      <tr mat-footer-row *matFooterRowDef="al.cols"></tr>
    </table>
  </div>
  <div fxFlex="1 1 calc(40% - 10px)">
    <div style="font-size: 14px; margin: 5px 0px">{{cl.label}}</div>
    <table mat-table [dataSource]="cl.dataSource" width="100%">
      <ng-container *ngFor="let col of cl.cols; let i = index" [matColumnDef]="col" >
        <th mat-header-cell *matHeaderCellDef  [ngStyle]="{'text-align': i > 0 ? 'center': null}"> {{cl.colLabels[col]}}  </th>
        <td mat-cell *matCellDef="let element" [ngStyle]="{'text-align': i > 0 ? 'center': null}"> {{element[col]}}</td>
        <td mat-footer-cell *matFooterCellDef  [ngStyle]="{'text-align': i > 0 ? 'center': null}"> {{total('cl',col)}} </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="cl.cols;"></tr>
      <tr mat-row *matRowDef="let row; columns: cl.cols;"></tr>
      <tr mat-footer-row *matFooterRowDef="cl.cols"></tr>
    </table>
  </div>
</mat-card>
